<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Barry: Barry::DBPacket Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li id="current"><a href="classes.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="namespaceBarry.html">Barry</a>::<a class="el" href="classBarry_1_1DBPacket.html">DBPacket</a></div>
<h1>Barry::DBPacket Class Reference</h1><!-- doxytag: class="Barry::DBPacket" --><!-- doxytag: inherits="Barry::Packet" --><code>#include &lt;<a class="el" href="packet_8h-source.html">packet.h</a>&gt;</code>
<p>
<p>Inheritance diagram for Barry::DBPacket:
<p><center><img src="classBarry_1_1DBPacket.png" usemap="#Barry::DBPacket_map" border="0" alt=""></center>
<map name="Barry::DBPacket_map">
<area href="classBarry_1_1Packet.html" alt="Barry::Packet" shape="rect" coords="0,0,105,24">
</map>
<a href="classBarry_1_1DBPacket-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
Provides an API for building and analyzing raw DB protocol packets. 
<p>
This class relies on 3 external objects: a <a class="el" href="classBarry_1_1Mode_1_1Desktop.html">Mode::Desktop</a> object, a send <a class="el" href="classBarry_1_1Data.html">Data</a> buffer, and a receive data buffer. <a class="el" href="classBarry_1_1Socket.html">Socket</a> and connection details are retrieved on a readonly basis from the <a class="el" href="classBarry_1_1Mode_1_1Desktop.html">Mode::Desktop</a> object, but both send and receive buffers can be modified.<p>
Note that the receive buffer may be modified during a packet send, and this <a class="el" href="classBarry_1_1DBPacket.html">DBPacket</a> class provides API helpers to analyze the results. 
<p>

<p>
Definition at line <a class="el" href="packet_8h-source.html#l00118">118</a> of file <a class="el" href="packet_8h-source.html">packet.h</a>.<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="1e76b643b03062a95f1331ec1587e434"></a><!-- doxytag: member="Barry::DBPacket::DBPacket" ref="1e76b643b03062a95f1331ec1587e434" args="(Mode::Desktop &amp;con, Data &amp;send, Data &amp;receive)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1DBPacket.html#1e76b643b03062a95f1331ec1587e434">DBPacket</a> (<a class="el" href="classBarry_1_1Mode_1_1Desktop.html">Mode::Desktop</a> &amp;con, <a class="el" href="classBarry_1_1Data.html">Data</a> &amp;send, <a class="el" href="classBarry_1_1Data.html">Data</a> &amp;receive)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ca71f16116e903b1a5f8d26f76d691c5"></a><!-- doxytag: member="Barry::DBPacket::~DBPacket" ref="ca71f16116e903b1a5f8d26f76d691c5" args="()" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1DBPacket.html#ca71f16116e903b1a5f8d26f76d691c5">~DBPacket</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1DBPacket.html#ace85c6dd63c5f85e21e9f61e10e5af5">ClearDatabase</a> (unsigned int dbId)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Builds a command packet for the CLEAR_DATABASE command code, placing the data in the send buffer.  <a href="#ace85c6dd63c5f85e21e9f61e10e5af5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1DBPacket.html#206e98e5159e7fe7790d4976d0f039a0">GetDBDB</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Builds a command packet for the GET_DBDB command code, placing the data in m_send.  <a href="#206e98e5159e7fe7790d4976d0f039a0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1DBPacket.html#07e2e8ca566a1f4d7cc493983b56c32b">GetRecordStateTable</a> (unsigned int dbId)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Builds a command packet in the send buffer for the GET_RECORD_STATE_TABLE command.  <a href="#07e2e8ca566a1f4d7cc493983b56c32b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1DBPacket.html#9f0237393389b714f30bf56e616183dd">SetRecordFlags</a> (unsigned int dbId, unsigned int stateTableIndex, uint8_t flag1)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Builds a command packet in the send buffer for the SET_RECORD_FLAGS command code.  <a href="#9f0237393389b714f30bf56e616183dd"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1DBPacket.html#fb9625f072f936a03ebee1ac64b78bf4">DeleteRecordByIndex</a> (unsigned int dbId, unsigned int stateTableIndex)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Builds a command packet in the send buffer for the DELETE_RECORD_BY_INDEX command code.  <a href="#fb9625f072f936a03ebee1ac64b78bf4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1DBPacket.html#95355f6de0ab12e9eacd0727e8a66965">GetRecordByIndex</a> (unsigned int dbId, unsigned int stateTableIndex)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Builds a command packet in the send buffer for the GET_RECORD_BY_INDEX command code.  <a href="#95355f6de0ab12e9eacd0727e8a66965"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1DBPacket.html#23d08253bfecf6b924fd2821f594c233">SetRecordByIndex</a> (unsigned int dbId, unsigned int stateTableIndex, <a class="el" href="classBarry_1_1Builder.html">Builder</a> &amp;build)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Builds a command packet in the m_send buffer for the SET_RECORD_BY_INDEX command code.  <a href="#23d08253bfecf6b924fd2821f594c233"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1DBPacket.html#173b8eb90186edc54e8a679d7498bcb5">GetRecords</a> (unsigned int dbId)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Builds a command packet in the send buffer for the GET_RECORDS command code.  <a href="#173b8eb90186edc54e8a679d7498bcb5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1DBPacket.html#e3aa5c5dcf4985792a9ca038c432d059">SetRecord</a> (unsigned int dbId, <a class="el" href="classBarry_1_1Builder.html">Builder</a> &amp;build)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Builds a command packet in the m_send buffer for the SET_RECORD command code.  <a href="#e3aa5c5dcf4985792a9ca038c432d059"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="00f584dccfde59c20541f7a0e74a7c3f"></a><!-- doxytag: member="Barry::DBPacket::ReturnCode" ref="00f584dccfde59c20541f7a0e74a7c3f" args="() const" -->
unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1DBPacket.html#00f584dccfde59c20541f7a0e74a7c3f">ReturnCode</a> () const</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1DBPacket.html#fbb7ca189f990821fc19610acc148bf0">DBOperation</a> () const</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the database operation code from the receive packet, assuming that receive contains a response packet.  <a href="#fbb7ca189f990821fc19610acc148bf0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1DBPacket.html#d8259c6e5bbd669a5367e1cee3c62f74">Parse</a> (<a class="el" href="classBarry_1_1Parser.html">Parser</a> &amp;parser)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Parses the data in the receive buffer, and attempts to be smart about it, using the last send command as guidance for what to expect in the response.  <a href="#d8259c6e5bbd669a5367e1cee3c62f74"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Friends</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="b510887d735ee73ab1cb598c66260e87"></a><!-- doxytag: member="Barry::DBPacket::Socket" ref="b510887d735ee73ab1cb598c66260e87" args="" -->
class&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1DBPacket.html#b510887d735ee73ab1cb598c66260e87">Socket</a></td></tr>

</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="ace85c6dd63c5f85e21e9f61e10e5af5"></a><!-- doxytag: member="Barry::DBPacket::ClearDatabase" ref="ace85c6dd63c5f85e21e9f61e10e5af5" args="(unsigned int dbId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Barry::DBPacket::ClearDatabase           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>dbId</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Builds a command packet for the CLEAR_DATABASE command code, placing the data in the send buffer. 
<p>

<p>
Definition at line <a class="el" href="packet_8cc-source.html#l00162">162</a> of file <a class="el" href="packet_8cc-source.html">packet.cc</a>.
<p>
References <a class="el" href="data_8cc-source.html#l00214">Barry::Data::GetBuffer()</a>, <a class="el" href="m__desktop_8cc-source.html#l00208">Barry::Mode::Desktop::GetDBCommand()</a>, <a class="el" href="endian_8h-source.html#l00033">htobs</a>, <a class="el" href="packet_8h-source.html#l00048">Barry::Packet::m_send</a>, <a class="el" href="protostructs_8h-source.html#l00592">MAKE_PACKETPTR_BUF</a>, <a class="el" href="data_8cc-source.html#l00222">Barry::Data::ReleaseBuffer()</a>, <a class="el" href="protocol_8h-source.html#l00038">SB_COMMAND_DB_DATA</a>, and <a class="el" href="protocol_8h-source.html#l00063">SB_DBOP_CLEAR_DATABASE</a>.
<p>
Referenced by <a class="el" href="m__desktop_8cc-source.html#l00467">Barry::Mode::Desktop::SaveDatabase()</a>.
</div>
</div><p>
<a class="anchor" name="206e98e5159e7fe7790d4976d0f039a0"></a><!-- doxytag: member="Barry::DBPacket::GetDBDB" ref="206e98e5159e7fe7790d4976d0f039a0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Barry::DBPacket::GetDBDB           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Builds a command packet for the GET_DBDB command code, placing the data in m_send. 
<p>

<p>
Definition at line <a class="el" href="packet_8cc-source.html#l00186">186</a> of file <a class="el" href="packet_8cc-source.html">packet.cc</a>.
<p>
References <a class="el" href="data_8cc-source.html#l00214">Barry::Data::GetBuffer()</a>, <a class="el" href="m__desktop_8cc-source.html#l00208">Barry::Mode::Desktop::GetDBCommand()</a>, <a class="el" href="endian_8h-source.html#l00033">htobs</a>, <a class="el" href="packet_8h-source.html#l00048">Barry::Packet::m_send</a>, <a class="el" href="protostructs_8h-source.html#l00592">MAKE_PACKETPTR_BUF</a>, <a class="el" href="data_8cc-source.html#l00222">Barry::Data::ReleaseBuffer()</a>, <a class="el" href="protocol_8h-source.html#l00038">SB_COMMAND_DB_DATA</a>, and <a class="el" href="protocol_8h-source.html#l00065">SB_DBOP_OLD_GET_DBDB</a>.
<p>
Referenced by <a class="el" href="m__desktop_8cc-source.html#l00089">Barry::Mode::Desktop::LoadDBDB()</a>.
</div>
</div><p>
<a class="anchor" name="07e2e8ca566a1f4d7cc493983b56c32b"></a><!-- doxytag: member="Barry::DBPacket::GetRecordStateTable" ref="07e2e8ca566a1f4d7cc493983b56c32b" args="(unsigned int dbId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Barry::DBPacket::GetRecordStateTable           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>dbId</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Builds a command packet in the send buffer for the GET_RECORD_STATE_TABLE command. 
<p>

<p>
Definition at line <a class="el" href="packet_8cc-source.html#l00210">210</a> of file <a class="el" href="packet_8cc-source.html">packet.cc</a>.
<p>
References <a class="el" href="data_8cc-source.html#l00214">Barry::Data::GetBuffer()</a>, <a class="el" href="m__desktop_8cc-source.html#l00208">Barry::Mode::Desktop::GetDBCommand()</a>, <a class="el" href="endian_8h-source.html#l00033">htobs</a>, <a class="el" href="packet_8h-source.html#l00048">Barry::Packet::m_send</a>, <a class="el" href="protostructs_8h-source.html#l00592">MAKE_PACKETPTR_BUF</a>, <a class="el" href="data_8cc-source.html#l00222">Barry::Data::ReleaseBuffer()</a>, <a class="el" href="protocol_8h-source.html#l00038">SB_COMMAND_DB_DATA</a>, and <a class="el" href="protocol_8h-source.html#l00071">SB_DBOP_GET_RECORD_STATE_TABLE</a>.
<p>
Referenced by <a class="el" href="m__desktop_8cc-source.html#l00239">Barry::Mode::Desktop::GetRecordStateTable()</a>.
</div>
</div><p>
<a class="anchor" name="9f0237393389b714f30bf56e616183dd"></a><!-- doxytag: member="Barry::DBPacket::SetRecordFlags" ref="9f0237393389b714f30bf56e616183dd" args="(unsigned int dbId, unsigned int stateTableIndex, uint8_t flag1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Barry::DBPacket::SetRecordFlags           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>dbId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>stateTableIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>flag1</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Builds a command packet in the send buffer for the SET_RECORD_FLAGS command code. 
<p>
FIXME - this API call is incomplete, since there are unknown flags in the SetRecordFlags protocol packet. Currently it is only used to set all flags to zero. 
<p>
Definition at line <a class="el" href="packet_8cc-source.html#l00238">238</a> of file <a class="el" href="packet_8cc-source.html">packet.cc</a>.
<p>
References <a class="el" href="protostructs_8h-source.html#l00277">DBC_RECORD_FLAGS_SIZE</a>, <a class="el" href="data_8cc-source.html#l00214">Barry::Data::GetBuffer()</a>, <a class="el" href="m__desktop_8cc-source.html#l00208">Barry::Mode::Desktop::GetDBCommand()</a>, <a class="el" href="endian_8h-source.html#l00033">htobs</a>, <a class="el" href="packet_8h-source.html#l00048">Barry::Packet::m_send</a>, <a class="el" href="protostructs_8h-source.html#l00592">MAKE_PACKETPTR_BUF</a>, <a class="el" href="data_8cc-source.html#l00222">Barry::Data::ReleaseBuffer()</a>, <a class="el" href="protocol_8h-source.html#l00038">SB_COMMAND_DB_DATA</a>, <a class="el" href="protocol_8h-source.html#l00072">SB_DBOP_SET_RECORD_FLAGS</a>, and <a class="el" href="protostructs_8h-source.html#l00574">SB_PACKET_COMMAND_HEADER_SIZE</a>.
<p>
Referenced by <a class="el" href="m__desktop_8cc-source.html#l00387">Barry::Mode::Desktop::ClearDirty()</a>.
</div>
</div><p>
<a class="anchor" name="fb9625f072f936a03ebee1ac64b78bf4"></a><!-- doxytag: member="Barry::DBPacket::DeleteRecordByIndex" ref="fb9625f072f936a03ebee1ac64b78bf4" args="(unsigned int dbId, unsigned int stateTableIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Barry::DBPacket::DeleteRecordByIndex           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>dbId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>stateTableIndex</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Builds a command packet in the send buffer for the DELETE_RECORD_BY_INDEX command code. 
<p>

<p>
Definition at line <a class="el" href="packet_8cc-source.html#l00267">267</a> of file <a class="el" href="packet_8cc-source.html">packet.cc</a>.
<p>
References <a class="el" href="protostructs_8h-source.html#l00269">DBC_RECORD_HEADER_SIZE</a>, <a class="el" href="data_8cc-source.html#l00214">Barry::Data::GetBuffer()</a>, <a class="el" href="m__desktop_8cc-source.html#l00208">Barry::Mode::Desktop::GetDBCommand()</a>, <a class="el" href="endian_8h-source.html#l00033">htobs</a>, <a class="el" href="packet_8h-source.html#l00048">Barry::Packet::m_send</a>, <a class="el" href="protostructs_8h-source.html#l00592">MAKE_PACKETPTR_BUF</a>, <a class="el" href="data_8cc-source.html#l00222">Barry::Data::ReleaseBuffer()</a>, <a class="el" href="protocol_8h-source.html#l00038">SB_COMMAND_DB_DATA</a>, <a class="el" href="protocol_8h-source.html#l00080">SB_DBOP_DELETE_RECORD_BY_INDEX</a>, and <a class="el" href="protostructs_8h-source.html#l00574">SB_PACKET_COMMAND_HEADER_SIZE</a>.
<p>
Referenced by <a class="el" href="m__desktop_8cc-source.html#l00407">Barry::Mode::Desktop::DeleteRecord()</a>.
</div>
</div><p>
<a class="anchor" name="95355f6de0ab12e9eacd0727e8a66965"></a><!-- doxytag: member="Barry::DBPacket::GetRecordByIndex" ref="95355f6de0ab12e9eacd0727e8a66965" args="(unsigned int dbId, unsigned int stateTableIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Barry::DBPacket::GetRecordByIndex           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>dbId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>stateTableIndex</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Builds a command packet in the send buffer for the GET_RECORD_BY_INDEX command code. 
<p>

<p>
Definition at line <a class="el" href="packet_8cc-source.html#l00293">293</a> of file <a class="el" href="packet_8cc-source.html">packet.cc</a>.
<p>
References <a class="el" href="data_8cc-source.html#l00214">Barry::Data::GetBuffer()</a>, <a class="el" href="m__desktop_8cc-source.html#l00208">Barry::Mode::Desktop::GetDBCommand()</a>, <a class="el" href="endian_8h-source.html#l00033">htobs</a>, <a class="el" href="packet_8h-source.html#l00048">Barry::Packet::m_send</a>, <a class="el" href="protostructs_8h-source.html#l00592">MAKE_PACKETPTR_BUF</a>, <a class="el" href="data_8cc-source.html#l00222">Barry::Data::ReleaseBuffer()</a>, <a class="el" href="protocol_8h-source.html#l00038">SB_COMMAND_DB_DATA</a>, and <a class="el" href="protocol_8h-source.html#l00074">SB_DBOP_GET_RECORD_BY_INDEX</a>.
<p>
Referenced by <a class="el" href="m__desktop_8cc-source.html#l00302">Barry::Mode::Desktop::GetRecord()</a>.
</div>
</div><p>
<a class="anchor" name="23d08253bfecf6b924fd2821f594c233"></a><!-- doxytag: member="Barry::DBPacket::SetRecordByIndex" ref="23d08253bfecf6b924fd2821f594c233" args="(unsigned int dbId, unsigned int stateTableIndex, Builder &amp;build)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Barry::DBPacket::SetRecordByIndex           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>dbId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>stateTableIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBarry_1_1Builder.html">Builder</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>build</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Builds a command packet in the m_send buffer for the SET_RECORD_BY_INDEX command code. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>bool<ul>
<li>true means success</li><li>false means no data available from <a class="el" href="classBarry_1_1Builder.html">Builder</a> object </li></ul>
</dd></dl>

<p>
Definition at line <a class="el" href="packet_8cc-source.html#l00322">322</a> of file <a class="el" href="packet_8cc-source.html">packet.cc</a>.
<p>
References <a class="el" href="classBarry_1_1Builder.html#37f36664d4df55f2fa946bb56eb3bba6">Barry::Builder::BuildFields()</a>, <a class="el" href="protostructs_8h-source.html#l00299">DBC_INDEXED_UPLOAD_HEADER_SIZE</a>, <a class="el" href="data_8cc-source.html#l00214">Barry::Data::GetBuffer()</a>, <a class="el" href="m__desktop_8cc-source.html#l00208">Barry::Mode::Desktop::GetDBCommand()</a>, <a class="el" href="data_8h-source.html#l00063">Barry::Data::GetSize()</a>, <a class="el" href="endian_8h-source.html#l00033">htobs</a>, <a class="el" href="packet_8h-source.html#l00048">Barry::Packet::m_send</a>, <a class="el" href="protostructs_8h-source.html#l00592">MAKE_PACKETPTR_BUF</a>, <a class="el" href="data_8cc-source.html#l00222">Barry::Data::ReleaseBuffer()</a>, <a class="el" href="classBarry_1_1Builder.html#936d3e7b4e771fb2f7ee48476d802407">Barry::Builder::Retrieve()</a>, <a class="el" href="protocol_8h-source.html#l00038">SB_COMMAND_DB_DATA</a>, <a class="el" href="protocol_8h-source.html#l00079">SB_DBOP_SET_RECORD_BY_INDEX</a>, and <a class="el" href="protostructs_8h-source.html#l00574">SB_PACKET_COMMAND_HEADER_SIZE</a>.
<p>
Referenced by <a class="el" href="m__desktop_8cc-source.html#l00350">Barry::Mode::Desktop::SetRecord()</a>.
</div>
</div><p>
<a class="anchor" name="173b8eb90186edc54e8a679d7498bcb5"></a><!-- doxytag: member="Barry::DBPacket::GetRecords" ref="173b8eb90186edc54e8a679d7498bcb5" args="(unsigned int dbId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Barry::DBPacket::GetRecords           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>dbId</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Builds a command packet in the send buffer for the GET_RECORDS command code. 
<p>

<p>
Definition at line <a class="el" href="packet_8cc-source.html#l00360">360</a> of file <a class="el" href="packet_8cc-source.html">packet.cc</a>.
<p>
References <a class="el" href="data_8cc-source.html#l00214">Barry::Data::GetBuffer()</a>, <a class="el" href="m__desktop_8cc-source.html#l00208">Barry::Mode::Desktop::GetDBCommand()</a>, <a class="el" href="endian_8h-source.html#l00033">htobs</a>, <a class="el" href="packet_8h-source.html#l00048">Barry::Packet::m_send</a>, <a class="el" href="protostructs_8h-source.html#l00592">MAKE_PACKETPTR_BUF</a>, <a class="el" href="data_8cc-source.html#l00222">Barry::Data::ReleaseBuffer()</a>, <a class="el" href="protocol_8h-source.html#l00038">SB_COMMAND_DB_DATA</a>, and <a class="el" href="protocol_8h-source.html#l00068">SB_DBOP_OLD_GET_RECORDS</a>.
<p>
Referenced by <a class="el" href="m__desktop_8cc-source.html#l00445">Barry::Mode::Desktop::LoadDatabase()</a>.
</div>
</div><p>
<a class="anchor" name="e3aa5c5dcf4985792a9ca038c432d059"></a><!-- doxytag: member="Barry::DBPacket::SetRecord" ref="e3aa5c5dcf4985792a9ca038c432d059" args="(unsigned int dbId, Builder &amp;build)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Barry::DBPacket::SetRecord           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>dbId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBarry_1_1Builder.html">Builder</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>build</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Builds a command packet in the m_send buffer for the SET_RECORD command code. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>bool<ul>
<li>true means success</li><li>false means no data available from <a class="el" href="classBarry_1_1Builder.html">Builder</a> object </li></ul>
</dd></dl>

<p>
Definition at line <a class="el" href="packet_8cc-source.html#l00388">388</a> of file <a class="el" href="packet_8cc-source.html">packet.cc</a>.
<p>
References <a class="el" href="classBarry_1_1Builder.html#37f36664d4df55f2fa946bb56eb3bba6">Barry::Builder::BuildFields()</a>, <a class="el" href="classBarry_1_1Builder.html#7fd24f3f6d34bd1a6e8875ce7c242e9b">Barry::Builder::BuildHeader()</a>, <a class="el" href="protostructs_8h-source.html#l00291">DBC_TAGGED_UPLOAD_HEADER_SIZE</a>, <a class="el" href="data_8cc-source.html#l00214">Barry::Data::GetBuffer()</a>, <a class="el" href="m__desktop_8cc-source.html#l00208">Barry::Mode::Desktop::GetDBCommand()</a>, <a class="el" href="classBarry_1_1Builder.html#23d9ae0f2b43520fcb628a92868d766c">Barry::Builder::GetRecType()</a>, <a class="el" href="data_8h-source.html#l00063">Barry::Data::GetSize()</a>, Barry::Builder::GetUniqueId(), <a class="el" href="endian_8h-source.html#l00034">htobl</a>, <a class="el" href="endian_8h-source.html#l00033">htobs</a>, <a class="el" href="packet_8h-source.html#l00048">Barry::Packet::m_send</a>, <a class="el" href="protostructs_8h-source.html#l00592">MAKE_PACKETPTR_BUF</a>, <a class="el" href="data_8cc-source.html#l00222">Barry::Data::ReleaseBuffer()</a>, <a class="el" href="classBarry_1_1Builder.html#936d3e7b4e771fb2f7ee48476d802407">Barry::Builder::Retrieve()</a>, <a class="el" href="protocol_8h-source.html#l00038">SB_COMMAND_DB_DATA</a>, <a class="el" href="protocol_8h-source.html#l00062">SB_DBOP_SET_RECORD</a>, and <a class="el" href="protostructs_8h-source.html#l00574">SB_PACKET_COMMAND_HEADER_SIZE</a>.
<p>
Referenced by <a class="el" href="m__desktop_8cc-source.html#l00266">Barry::Mode::Desktop::AddRecord()</a>, and <a class="el" href="m__desktop_8cc-source.html#l00467">Barry::Mode::Desktop::SaveDatabase()</a>.
</div>
</div><p>
<a class="anchor" name="fbb7ca189f990821fc19610acc148bf0"></a><!-- doxytag: member="Barry::DBPacket::DBOperation" ref="fbb7ca189f990821fc19610acc148bf0" args="() const" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int Barry::DBPacket::DBOperation           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the database operation code from the receive packet, assuming that receive contains a response packet. 
<p>
If receive isn't large enough, throws <a class="el" href="classBarry_1_1Error.html">Error</a>. 
<p>
Definition at line <a class="el" href="packet_8cc-source.html#l00442">442</a> of file <a class="el" href="packet_8cc-source.html">packet.cc</a>.
<p>
References <a class="el" href="protocol_8cc-source.html#l00033">Barry::Protocol::CheckSize()</a>, <a class="el" href="packet_8h-source.html#l00048">Barry::Packet::m_receive</a>, <a class="el" href="protostructs_8h-source.html#l00591">MAKE_PACKET</a>, and <a class="el" href="protostructs_8h-source.html#l00575">SB_PACKET_RESPONSE_HEADER_SIZE</a>.
</div>
</div><p>
<a class="anchor" name="d8259c6e5bbd669a5367e1cee3c62f74"></a><!-- doxytag: member="Barry::DBPacket::Parse" ref="d8259c6e5bbd669a5367e1cee3c62f74" args="(Parser &amp;parser)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Barry::DBPacket::Parse           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBarry_1_1Parser.html">Parser</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>parser</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Parses the data in the receive buffer, and attempts to be smart about it, using the last send command as guidance for what to expect in the response. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>bool true - packet was recognized and parse was attempted false - packet was not recognized </dd></dl>

<p>
Definition at line <a class="el" href="packet_8cc-source.html#l00459">459</a> of file <a class="el" href="packet_8cc-source.html">packet.cc</a>.
<p>
References <a class="el" href="endian_8h-source.html#l00031">btohl</a>, <a class="el" href="protocol_8cc-source.html#l00033">Barry::Protocol::CheckSize()</a>, <a class="el" href="parser_8h-source.html#l00055">Barry::Parser::Clear()</a>, <a class="el" href="protostructs_8h-source.html#l00432">DBR_OLD_TAGGED_RECORD_HEADER_SIZE</a>, <a class="el" href="packet_8h-source.html#l00048">Barry::Packet::m_receive</a>, <a class="el" href="protostructs_8h-source.html#l00591">MAKE_PACKET</a>, <a class="el" href="parser_8h-source.html#l00069">Barry::Parser::ParseFields()</a>, <a class="el" href="parser_8h-source.html#l00063">Barry::Parser::ParseHeader()</a>, <a class="el" href="protocol_8h-source.html#l00074">SB_DBOP_GET_RECORD_BY_INDEX</a>, <a class="el" href="protocol_8h-source.html#l00068">SB_DBOP_OLD_GET_RECORDS</a>, <a class="el" href="protostructs_8h-source.html#l00575">SB_PACKET_RESPONSE_HEADER_SIZE</a>, <a class="el" href="parser_8h-source.html#l00058">Barry::Parser::SetIds()</a>, and <a class="el" href="parser_8h-source.html#l00073">Barry::Parser::Store()</a>.
<p>
Referenced by <a class="el" href="m__desktop_8cc-source.html#l00302">Barry::Mode::Desktop::GetRecord()</a>, and <a class="el" href="m__desktop_8cc-source.html#l00445">Barry::Mode::Desktop::LoadDatabase()</a>.
</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="packet_8h-source.html">packet.h</a><li><a class="el" href="packet_8cc-source.html">packet.cc</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Wed Sep 24 21:27:33 2008 for Barry by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
