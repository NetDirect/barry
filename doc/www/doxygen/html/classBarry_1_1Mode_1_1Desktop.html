<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Barry: Barry::Mode::Desktop Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li id="current"><a href="classes.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="namespaceBarry.html">Barry</a>::<a class="el" href="namespaceBarry_1_1Mode.html">Mode</a>::<a class="el" href="classBarry_1_1Mode_1_1Desktop.html">Desktop</a></div>
<h1>Barry::Mode::Desktop Class Reference</h1><!-- doxytag: class="Barry::Mode::Desktop" --><code>#include &lt;<a class="el" href="m__desktop_8h-source.html">m_desktop.h</a>&gt;</code>
<p>
<a href="classBarry_1_1Mode_1_1Desktop-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
The main interface class to the device databases. 
<p>
To use this class, use the following steps:<p>
<ul>
<li>Create a <a class="el" href="classBarry_1_1Controller.html">Controller</a> object (see <a class="el" href="classBarry_1_1Controller.html">Controller</a> class for more details)</li><li>Create this <a class="el" href="classBarry_1_1Mode_1_1Desktop.html">Mode::Desktop</a> object, passing in the <a class="el" href="classBarry_1_1Controller.html">Controller</a> object during construction</li><li>Call <a class="el" href="classBarry_1_1Mode_1_1Desktop.html#1f26ff113348bf14c5f2b2feafa87fb1">Open()</a> to open database socket and finish constructing.</li><li>Call <a class="el" href="classBarry_1_1Mode_1_1Desktop.html#1b21dea3ac3102ee562099505c33b5b9">GetDBDB()</a> to get the device's database database</li><li>Call <a class="el" href="classBarry_1_1Mode_1_1Desktop.html#8ccf2da798c5c3cca2a9e870424bdeca">GetDBID()</a> to get a database ID by name</li><li>Call <a class="el" href="classBarry_1_1Mode_1_1Desktop.html#6bb1c96d6082575b5fa684dee2af51a6">LoadDatabase()</a> to retrieve and store a database </li></ul>

<p>

<p>
Definition at line <a class="el" href="m__desktop_8h-source.html#l00053">53</a> of file <a class="el" href="m__desktop_8h-source.html">m_desktop.h</a>.<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1Mode_1_1Desktop.html#270f24f33d5f2bcd26f72dd6786cfb23">CommandType</a> </td></tr>

<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="274bee93a4c2b89aec89aae05fc93f7a"></a><!-- doxytag: member="Barry::Mode::Desktop::Desktop" ref="274bee93a4c2b89aec89aae05fc93f7a" args="(Controller &amp;con)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1Mode_1_1Desktop.html#274bee93a4c2b89aec89aae05fc93f7a">Desktop</a> (<a class="el" href="classBarry_1_1Controller.html">Controller</a> &amp;con)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="40e9fdb11160156ae5ebe482f738dec4"></a><!-- doxytag: member="Barry::Mode::Desktop::~Desktop" ref="40e9fdb11160156ae5ebe482f738dec4" args="()" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1Mode_1_1Desktop.html#40e9fdb11160156ae5ebe482f738dec4">~Desktop</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1Mode_1_1Desktop.html#1f26ff113348bf14c5f2b2feafa87fb1">Open</a> (const char *password=0)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Select device mode.  <a href="#1f26ff113348bf14c5f2b2feafa87fb1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1Mode_1_1Desktop.html#e49008bdcfdf7198706f67689042abc7">RetryPassword</a> (const char *password)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retry a failed password attempt from the first call to <a class="el" href="classBarry_1_1Mode_1_1Desktop.html#1f26ff113348bf14c5f2b2feafa87fb1">Open()</a>.  <a href="#e49008bdcfdf7198706f67689042abc7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="classBarry_1_1DatabaseDatabase.html">DatabaseDatabase</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1Mode_1_1Desktop.html#1b21dea3ac3102ee562099505c33b5b9">GetDBDB</a> () const</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns <a class="el" href="classBarry_1_1DatabaseDatabase.html">DatabaseDatabase</a> object for this connection.  <a href="#1b21dea3ac3102ee562099505c33b5b9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1Mode_1_1Desktop.html#8ccf2da798c5c3cca2a9e870424bdeca">GetDBID</a> (const std::string &amp;name) const</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get numeric database ID by name.  <a href="#8ccf2da798c5c3cca2a9e870424bdeca"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1Mode_1_1Desktop.html#b1d7a169122aae509924729aedfeb24f">GetDBCommand</a> (<a class="el" href="classBarry_1_1Mode_1_1Desktop.html#270f24f33d5f2bcd26f72dd6786cfb23">CommandType</a> ct)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get database command from command table.  <a href="#b1d7a169122aae509924729aedfeb24f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1Mode_1_1Desktop.html#047fe0a4a6dff740822451ffd38ddd84">GetRecordStateTable</a> (unsigned int dbId, <a class="el" href="classBarry_1_1RecordStateTable.html">RecordStateTable</a> &amp;result)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve the record state table from the handheld device, using the given database ID.  <a href="#047fe0a4a6dff740822451ffd38ddd84"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1Mode_1_1Desktop.html#0fec0d31ff496974acfc15fdc75f074a">AddRecord</a> (unsigned int dbId, <a class="el" href="classBarry_1_1Builder.html">Builder</a> &amp;build)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Adds a record to the specified database.  <a href="#0fec0d31ff496974acfc15fdc75f074a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1Mode_1_1Desktop.html#2420208d094c0195dd41b5836f54dc10">GetRecord</a> (unsigned int dbId, unsigned int stateTableIndex, <a class="el" href="classBarry_1_1Parser.html">Parser</a> &amp;parser)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieves a specific record from the specified database.  <a href="#2420208d094c0195dd41b5836f54dc10"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1Mode_1_1Desktop.html#bf813b7fb04062515369209c8073dab0">SetRecord</a> (unsigned int dbId, unsigned int stateTableIndex, <a class="el" href="classBarry_1_1Builder.html">Builder</a> &amp;build)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Overwrites a specific record in the device as identified by the stateTableIndex.  <a href="#bf813b7fb04062515369209c8073dab0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1Mode_1_1Desktop.html#a766fb027d28f7cf4bb069eb0991baaa">ClearDirty</a> (unsigned int dbId, unsigned int stateTableIndex)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Clears the dirty flag on the specified record in the specified database.  <a href="#a766fb027d28f7cf4bb069eb0991baaa"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1Mode_1_1Desktop.html#04cd4063958483b31cc98a353f335fe0">DeleteRecord</a> (unsigned int dbId, unsigned int stateTableIndex)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Deletes the specified record in the specified database.  <a href="#04cd4063958483b31cc98a353f335fe0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1Mode_1_1Desktop.html#6bb1c96d6082575b5fa684dee2af51a6">LoadDatabase</a> (unsigned int dbId, <a class="el" href="classBarry_1_1Parser.html">Parser</a> &amp;parser)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve a database from the handheld device, using the given parser to parse the resulting data, and optionally store it.  <a href="#6bb1c96d6082575b5fa684dee2af51a6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="d4597bd38ef06b3cafbaf56a6e9b9fd6"></a><!-- doxytag: member="Barry::Mode::Desktop::SaveDatabase" ref="d4597bd38ef06b3cafbaf56a6e9b9fd6" args="(unsigned int dbId, Builder &amp;builder)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1Mode_1_1Desktop.html#d4597bd38ef06b3cafbaf56a6e9b9fd6">SaveDatabase</a> (unsigned int dbId, <a class="el" href="classBarry_1_1Builder.html">Builder</a> &amp;builder)</td></tr>

<tr><td class="memTemplParams" nowrap colspan="2"><a class="anchor" name="fdf8a6d6cdb8f33a72a1bd356068ff0a"></a><!-- doxytag: member="Barry::Mode::Desktop::LoadDatabaseByType" ref="fdf8a6d6cdb8f33a72a1bd356068ff0a" args="(StorageT &amp;store)" -->
template&lt;class RecordT, class StorageT&gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classBarry_1_1Mode_1_1Desktop.html#fdf8a6d6cdb8f33a72a1bd356068ff0a">LoadDatabaseByType</a> (StorageT &amp;store)</td></tr>

<tr><td class="memTemplParams" nowrap colspan="2"><a class="anchor" name="6f2d4a7f3d3893a83f87e6b7f8342c30"></a><!-- doxytag: member="Barry::Mode::Desktop::SaveDatabaseByType" ref="6f2d4a7f3d3893a83f87e6b7f8342c30" args="(StorageT &amp;store)" -->
template&lt;class RecordT, class StorageT&gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classBarry_1_1Mode_1_1Desktop.html#6f2d4a7f3d3893a83f87e6b7f8342c30">SaveDatabaseByType</a> (StorageT &amp;store)</td></tr>

<tr><td class="memTemplParams" nowrap colspan="2"><a class="anchor" name="98e5b9fa029fea697fa3a6adc9d306af"></a><!-- doxytag: member="Barry::Mode::Desktop::LoadDatabaseByName" ref="98e5b9fa029fea697fa3a6adc9d306af" args="(const std::string &amp;name, StorageT &amp;store)" -->
template&lt;class StorageT&gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classBarry_1_1Mode_1_1Desktop.html#98e5b9fa029fea697fa3a6adc9d306af">LoadDatabaseByName</a> (const std::string &amp;name, StorageT &amp;store)</td></tr>

<tr><td class="memTemplParams" nowrap colspan="2"><a class="anchor" name="6994430170b5f524fa67aade29ae6bd1"></a><!-- doxytag: member="Barry::Mode::Desktop::SaveDatabaseByName" ref="6994430170b5f524fa67aade29ae6bd1" args="(const std::string &amp;name, StorageT &amp;store)" -->
template&lt;class StorageT&gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classBarry_1_1Mode_1_1Desktop.html#6994430170b5f524fa67aade29ae6bd1">SaveDatabaseByName</a> (const std::string &amp;name, StorageT &amp;store)</td></tr>

<tr><td class="memTemplParams" nowrap colspan="2"><a class="anchor" name="45a94063411b8352ae26f80cbb192348"></a><!-- doxytag: member="Barry::Mode::Desktop::AddRecordByType" ref="45a94063411b8352ae26f80cbb192348" args="(uint32_t recordId, const RecordT &amp;rec)" -->
template&lt;class RecordT&gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classBarry_1_1Mode_1_1Desktop.html#45a94063411b8352ae26f80cbb192348">AddRecordByType</a> (uint32_t recordId, const RecordT &amp;rec)</td></tr>

<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="be7d7b24b3a1df986171c50f83d5c971"></a><!-- doxytag: member="Barry::Mode::Desktop::LoadCommandTable" ref="be7d7b24b3a1df986171c50f83d5c971" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1Mode_1_1Desktop.html#be7d7b24b3a1df986171c50f83d5c971">LoadCommandTable</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="475a95705cff4209a9da42ffa5a3511a"></a><!-- doxytag: member="Barry::Mode::Desktop::LoadDBDB" ref="475a95705cff4209a9da42ffa5a3511a" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1Mode_1_1Desktop.html#475a95705cff4209a9da42ffa5a3511a">LoadDBDB</a> ()</td></tr>

</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="1f26ff113348bf14c5f2b2feafa87fb1"></a><!-- doxytag: member="Barry::Mode::Desktop::Open" ref="1f26ff113348bf14c5f2b2feafa87fb1" args="(const char *password=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Barry::Mode::Desktop::Open           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>password</em> = <code>0</code>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Select device mode. 
<p>
This is required before using any other mode-based operations, such as <a class="el" href="classBarry_1_1Mode_1_1Desktop.html#1b21dea3ac3102ee562099505c33b5b9">GetDBDB()</a> and <a class="el" href="classBarry_1_1Mode_1_1Desktop.html#6bb1c96d6082575b5fa684dee2af51a6">LoadDatabase()</a>.<p>
This function opens a socket to the device for communicating in <a class="el" href="classBarry_1_1Mode_1_1Desktop.html">Desktop</a> mode. If the device requires it, specify the password with a const char* string in password. The password will not be stored in memory inside this class, only a hash will be generated from it. After using the hash, the hash memory will be set to 0. The application is responsible for safely handling the raw password data.<p>
You can retry the password by catching <a class="el" href="classBarry_1_1BadPassword.html">Barry::BadPassword</a> and calling <a class="el" href="classBarry_1_1Mode_1_1Desktop.html#e49008bdcfdf7198706f67689042abc7">RetryPassword()</a> with the new password.<p>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classBarry_1_1Error.html">Barry::Error</a></em>&nbsp;</td><td>Thrown on protocol error.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>std::logic_error()</em>&nbsp;</td><td>Thrown if unsupported mode is requested, or if socket already open.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classBarry_1_1BadPassword.html">Barry::BadPassword</a></em>&nbsp;</td><td>Thrown when password is invalid or if not enough retries left in the device. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="m__desktop_8cc-source.html#l00140">140</a> of file <a class="el" href="m__desktop_8cc-source.html">m_desktop.cc</a>.
<p>
References <a class="el" href="m__desktop_8cc-source.html#l00169">RetryPassword()</a>, and <a class="el" href="controller_8cc-source.html#l00152">Barry::Controller::SelectMode()</a>.
<p>
Referenced by <a class="el" href="btool_8cc-source.html#l00415">main()</a>.
</div>
</div><p>
<a class="anchor" name="e49008bdcfdf7198706f67689042abc7"></a><!-- doxytag: member="Barry::Mode::Desktop::RetryPassword" ref="e49008bdcfdf7198706f67689042abc7" args="(const char *password)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Barry::Mode::Desktop::RetryPassword           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>password</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Retry a failed password attempt from the first call to <a class="el" href="classBarry_1_1Mode_1_1Desktop.html#1f26ff113348bf14c5f2b2feafa87fb1">Open()</a>. 
<p>
Only call this function in response to <a class="el" href="classBarry_1_1BadPassword.html">Barry::BadPassword</a> exceptions that are thrown from <a class="el" href="classBarry_1_1Mode_1_1Desktop.html#1f26ff113348bf14c5f2b2feafa87fb1">Open()</a>.<p>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classBarry_1_1Error.html">Barry::Error</a></em>&nbsp;</td><td>Thrown on protocol error.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>std::logic_error()</em>&nbsp;</td><td>Thrown if in unsupported mode, or if socket already open.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classBarry_1_1BadPassword.html">Barry::BadPassword</a></em>&nbsp;</td><td>Thrown when password is invalid or if not enough retries left in the device. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="m__desktop_8cc-source.html#l00169">169</a> of file <a class="el" href="m__desktop_8cc-source.html">m_desktop.cc</a>.
<p>
References <a class="el" href="m__desktop_8cc-source.html#l00055">LoadCommandTable()</a>, <a class="el" href="m__desktop_8cc-source.html#l00089">LoadDBDB()</a>, <a class="el" href="controller_8h-source.html#l00091">Barry::Controller::m_zero</a>, and <a class="el" href="socket_8cc-source.html#l00420">Barry::SocketZero::Open()</a>.
<p>
Referenced by <a class="el" href="m__desktop_8cc-source.html#l00140">Open()</a>.
</div>
</div><p>
<a class="anchor" name="1b21dea3ac3102ee562099505c33b5b9"></a><!-- doxytag: member="Barry::Mode::Desktop::GetDBDB" ref="1b21dea3ac3102ee562099505c33b5b9" args="() const" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classBarry_1_1DatabaseDatabase.html">DatabaseDatabase</a>&amp; Barry::Mode::Desktop::GetDBDB           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns <a class="el" href="classBarry_1_1DatabaseDatabase.html">DatabaseDatabase</a> object for this connection. 
<p>
Must call <a class="el" href="classBarry_1_1Mode_1_1Desktop.html#1f26ff113348bf14c5f2b2feafa87fb1">Open()</a> first, which loads the DBDB. 
<p>
Definition at line <a class="el" href="m__desktop_8h-source.html#l00088">88</a> of file <a class="el" href="m__desktop_8h-source.html">m_desktop.h</a>.
<p>
Referenced by <a class="el" href="btool_8cc-source.html#l00415">main()</a>.
</div>
</div><p>
<a class="anchor" name="8ccf2da798c5c3cca2a9e870424bdeca"></a><!-- doxytag: member="Barry::Mode::Desktop::GetDBID" ref="8ccf2da798c5c3cca2a9e870424bdeca" args="(const std::string &amp;name) const" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int Barry::Mode::Desktop::GetDBID           </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>name</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get numeric database ID by name. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>name</em>&nbsp;</td><td>Name of database, which matches one of the names listed in <a class="el" href="classBarry_1_1Mode_1_1Desktop.html#1b21dea3ac3102ee562099505c33b5b9">GetDBDB()</a></td></tr>
  </table>
</dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classBarry_1_1Error.html">Barry::Error</a></em>&nbsp;</td><td>Thrown if name not found. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="m__desktop_8cc-source.html#l00192">192</a> of file <a class="el" href="m__desktop_8cc-source.html">m_desktop.cc</a>.
<p>
References <a class="el" href="record_8cc-source.html#l00452">Barry::DatabaseDatabase::GetDBNumber()</a>.
<p>
Referenced by <a class="el" href="m__desktoptmpl_8h-source.html#l00078">AddRecordByType()</a>, <a class="el" href="m__desktoptmpl_8h-source.html#l00036">LoadDatabaseByType()</a>, <a class="el" href="btool_8cc-source.html#l00415">main()</a>, and <a class="el" href="m__desktoptmpl_8h-source.html#l00044">SaveDatabaseByType()</a>.
</div>
</div><p>
<a class="anchor" name="b1d7a169122aae509924729aedfeb24f"></a><!-- doxytag: member="Barry::Mode::Desktop::GetDBCommand" ref="b1d7a169122aae509924729aedfeb24f" args="(CommandType ct)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int Barry::Mode::Desktop::GetDBCommand           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBarry_1_1Mode_1_1Desktop.html#270f24f33d5f2bcd26f72dd6786cfb23">CommandType</a>&nbsp;</td>
          <td class="paramname"> <em>ct</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get database command from command table. 
<p>
Must call <a class="el" href="classBarry_1_1Mode_1_1Desktop.html#1f26ff113348bf14c5f2b2feafa87fb1">Open()</a> before this. 
<p>
Definition at line <a class="el" href="m__desktop_8cc-source.html#l00208">208</a> of file <a class="el" href="m__desktop_8cc-source.html">m_desktop.cc</a>.
<p>
References <a class="el" href="record_8cc-source.html#l00211">Barry::CommandTable::GetCommand()</a>.
<p>
Referenced by <a class="el" href="packet_8cc-source.html#l00162">Barry::DBPacket::ClearDatabase()</a>, <a class="el" href="packet_8cc-source.html#l00267">Barry::DBPacket::DeleteRecordByIndex()</a>, <a class="el" href="packet_8cc-source.html#l00186">Barry::DBPacket::GetDBDB()</a>, <a class="el" href="packet_8cc-source.html#l00293">Barry::DBPacket::GetRecordByIndex()</a>, <a class="el" href="packet_8cc-source.html#l00360">Barry::DBPacket::GetRecords()</a>, <a class="el" href="packet_8cc-source.html#l00210">Barry::DBPacket::GetRecordStateTable()</a>, <a class="el" href="packet_8cc-source.html#l00388">Barry::DBPacket::SetRecord()</a>, <a class="el" href="packet_8cc-source.html#l00322">Barry::DBPacket::SetRecordByIndex()</a>, and <a class="el" href="packet_8cc-source.html#l00238">Barry::DBPacket::SetRecordFlags()</a>.
</div>
</div><p>
<a class="anchor" name="047fe0a4a6dff740822451ffd38ddd84"></a><!-- doxytag: member="Barry::Mode::Desktop::GetRecordStateTable" ref="047fe0a4a6dff740822451ffd38ddd84" args="(unsigned int dbId, RecordStateTable &amp;result)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Barry::Mode::Desktop::GetRecordStateTable           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>dbId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBarry_1_1RecordStateTable.html">RecordStateTable</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>result</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Retrieve the record state table from the handheld device, using the given database ID. 
<p>
Results will be stored in result, which will be cleared before adding. 
<p>
Definition at line <a class="el" href="m__desktop_8cc-source.html#l00239">239</a> of file <a class="el" href="m__desktop_8cc-source.html">m_desktop.cc</a>.
<p>
References <a class="el" href="record_8cc-source.html#l00279">Barry::RecordStateTable::Clear()</a>, <a class="el" href="packet_8cc-source.html#l00050">Barry::Packet::Command()</a>, <a class="el" href="packet_8cc-source.html#l00210">Barry::DBPacket::GetRecordStateTable()</a>, <a class="el" href="record_8cc-source.html#l00265">Barry::RecordStateTable::Parse()</a>, and <a class="el" href="protocol_8h-source.html#l00040">SB_COMMAND_DB_DONE</a>.
<p>
Referenced by <a class="el" href="btool_8cc-source.html#l00415">main()</a>.
</div>
</div><p>
<a class="anchor" name="0fec0d31ff496974acfc15fdc75f074a"></a><!-- doxytag: member="Barry::Mode::Desktop::AddRecord" ref="0fec0d31ff496974acfc15fdc75f074a" args="(unsigned int dbId, Builder &amp;build)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Barry::Mode::Desktop::AddRecord           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>dbId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBarry_1_1Builder.html">Builder</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>build</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Adds a record to the specified database. 
<p>
RecordId is retrieved from build, and duplicate IDs are allowed by the device (i.e. you can have two records with the same ID) but *not* recommended! 
<p>
Definition at line <a class="el" href="m__desktop_8cc-source.html#l00266">266</a> of file <a class="el" href="m__desktop_8cc-source.html">m_desktop.cc</a>.
<p>
References <a class="el" href="protocol_8h-source.html#l00040">SB_COMMAND_DB_DONE</a>, and <a class="el" href="packet_8cc-source.html#l00388">Barry::DBPacket::SetRecord()</a>.
<p>
Referenced by <a class="el" href="m__desktoptmpl_8h-source.html#l00078">AddRecordByType()</a>.
</div>
</div><p>
<a class="anchor" name="2420208d094c0195dd41b5836f54dc10"></a><!-- doxytag: member="Barry::Mode::Desktop::GetRecord" ref="2420208d094c0195dd41b5836f54dc10" args="(unsigned int dbId, unsigned int stateTableIndex, Parser &amp;parser)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Barry::Mode::Desktop::GetRecord           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>dbId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>stateTableIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBarry_1_1Parser.html">Parser</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>parser</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Retrieves a specific record from the specified database. 
<p>
The stateTableIndex comes from the <a class="el" href="classBarry_1_1Mode_1_1Desktop.html#047fe0a4a6dff740822451ffd38ddd84">GetRecordStateTable()</a> function. <a class="el" href="classBarry_1_1Mode_1_1Desktop.html#2420208d094c0195dd41b5836f54dc10">GetRecord()</a> does not clear the dirty flag. 
<p>
Definition at line <a class="el" href="m__desktop_8cc-source.html#l00302">302</a> of file <a class="el" href="m__desktop_8cc-source.html">m_desktop.cc</a>.
<p>
References <a class="el" href="packet_8cc-source.html#l00050">Barry::Packet::Command()</a>, <a class="el" href="packet_8cc-source.html#l00293">Barry::DBPacket::GetRecordByIndex()</a>, <a class="el" href="data_8h-source.html#l00063">Barry::Data::GetSize()</a>, <a class="el" href="packet_8cc-source.html#l00459">Barry::DBPacket::Parse()</a>, <a class="el" href="protocol_8h-source.html#l00038">SB_COMMAND_DB_DATA</a>, <a class="el" href="protocol_8h-source.html#l00040">SB_COMMAND_DB_DONE</a>, and <a class="el" href="protostructs_8h-source.html#l00575">SB_PACKET_RESPONSE_HEADER_SIZE</a>.
<p>
Referenced by <a class="el" href="btool_8cc-source.html#l00415">main()</a>.
</div>
</div><p>
<a class="anchor" name="bf813b7fb04062515369209c8073dab0"></a><!-- doxytag: member="Barry::Mode::Desktop::SetRecord" ref="bf813b7fb04062515369209c8073dab0" args="(unsigned int dbId, unsigned int stateTableIndex, Builder &amp;build)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Barry::Mode::Desktop::SetRecord           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>dbId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>stateTableIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBarry_1_1Builder.html">Builder</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>build</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Overwrites a specific record in the device as identified by the stateTableIndex. 
<p>

<p>
Definition at line <a class="el" href="m__desktop_8cc-source.html#l00350">350</a> of file <a class="el" href="m__desktop_8cc-source.html">m_desktop.cc</a>.
<p>
References <a class="el" href="packet_8cc-source.html#l00050">Barry::Packet::Command()</a>, <a class="el" href="packet_8cc-source.html#l00423">Barry::DBPacket::ReturnCode()</a>, <a class="el" href="protocol_8h-source.html#l00040">SB_COMMAND_DB_DONE</a>, and <a class="el" href="packet_8cc-source.html#l00322">Barry::DBPacket::SetRecordByIndex()</a>.
</div>
</div><p>
<a class="anchor" name="a766fb027d28f7cf4bb069eb0991baaa"></a><!-- doxytag: member="Barry::Mode::Desktop::ClearDirty" ref="a766fb027d28f7cf4bb069eb0991baaa" args="(unsigned int dbId, unsigned int stateTableIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Barry::Mode::Desktop::ClearDirty           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>dbId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>stateTableIndex</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Clears the dirty flag on the specified record in the specified database. 
<p>

<p>
Definition at line <a class="el" href="m__desktop_8cc-source.html#l00387">387</a> of file <a class="el" href="m__desktop_8cc-source.html">m_desktop.cc</a>.
<p>
References <a class="el" href="packet_8cc-source.html#l00050">Barry::Packet::Command()</a>, <a class="el" href="protocol_8h-source.html#l00040">SB_COMMAND_DB_DONE</a>, and <a class="el" href="packet_8cc-source.html#l00238">Barry::DBPacket::SetRecordFlags()</a>.
<p>
Referenced by <a class="el" href="btool_8cc-source.html#l00415">main()</a>.
</div>
</div><p>
<a class="anchor" name="04cd4063958483b31cc98a353f335fe0"></a><!-- doxytag: member="Barry::Mode::Desktop::DeleteRecord" ref="04cd4063958483b31cc98a353f335fe0" args="(unsigned int dbId, unsigned int stateTableIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Barry::Mode::Desktop::DeleteRecord           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>dbId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>stateTableIndex</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Deletes the specified record in the specified database. 
<p>

<p>
Definition at line <a class="el" href="m__desktop_8cc-source.html#l00407">407</a> of file <a class="el" href="m__desktop_8cc-source.html">m_desktop.cc</a>.
<p>
References <a class="el" href="packet_8cc-source.html#l00050">Barry::Packet::Command()</a>, <a class="el" href="packet_8cc-source.html#l00267">Barry::DBPacket::DeleteRecordByIndex()</a>, and <a class="el" href="protocol_8h-source.html#l00040">SB_COMMAND_DB_DONE</a>.
<p>
Referenced by <a class="el" href="btool_8cc-source.html#l00415">main()</a>.
</div>
</div><p>
<a class="anchor" name="6bb1c96d6082575b5fa684dee2af51a6"></a><!-- doxytag: member="Barry::Mode::Desktop::LoadDatabase" ref="6bb1c96d6082575b5fa684dee2af51a6" args="(unsigned int dbId, Parser &amp;parser)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Barry::Mode::Desktop::LoadDatabase           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>dbId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBarry_1_1Parser.html">Parser</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>parser</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Retrieve a database from the handheld device, using the given parser to parse the resulting data, and optionally store it. 
<p>
See the RecordParser&lt;&gt; template to create a parser object. The RecordParser&lt;&gt; template allows custom storage based on the type of database record retrieved. The database ID and the parser Record type must match.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dbId</em>&nbsp;</td><td>Database Database ID - use <a class="el" href="classBarry_1_1Mode_1_1Desktop.html#8ccf2da798c5c3cca2a9e870424bdeca">GetDBID()</a> </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>parser</em>&nbsp;</td><td><a class="el" href="classBarry_1_1Parser.html">Parser</a> object which parses the resulting protocol data, and optionally stores it in a custom fashion. See the RecordParser&lt;&gt; template.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classBarry_1_1Error.html">Barry::Error</a></em>&nbsp;</td><td>Thrown on protocol error.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>std::logic_error</em>&nbsp;</td><td>Thrown if not in <a class="el" href="classBarry_1_1Mode_1_1Desktop.html">Desktop</a> mode. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="m__desktop_8cc-source.html#l00445">445</a> of file <a class="el" href="m__desktop_8cc-source.html">m_desktop.cc</a>.
<p>
References <a class="el" href="packet_8cc-source.html#l00050">Barry::Packet::Command()</a>, <a class="el" href="packet_8cc-source.html#l00360">Barry::DBPacket::GetRecords()</a>, <a class="el" href="packet_8cc-source.html#l00459">Barry::DBPacket::Parse()</a>, <a class="el" href="protocol_8h-source.html#l00038">SB_COMMAND_DB_DATA</a>, and <a class="el" href="protocol_8h-source.html#l00040">SB_COMMAND_DB_DONE</a>.
<p>
Referenced by <a class="el" href="m__desktoptmpl_8h-source.html#l00036">LoadDatabaseByType()</a>, and <a class="el" href="btool_8cc-source.html#l00415">main()</a>.
</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="m__desktop_8h-source.html">m_desktop.h</a><li><a class="el" href="m__desktop_8cc-source.html">m_desktop.cc</a><li><a class="el" href="m__desktoptmpl_8h-source.html">m_desktoptmpl.h</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Wed Sep 24 21:27:33 2008 for Barry by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
