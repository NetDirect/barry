<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Barry: Barry::RecordBuilder&lt; RecordT, StorageT &gt; Class Template Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li id="current"><a href="classes.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="namespaceBarry.html">Barry</a>::<a class="el" href="classBarry_1_1RecordBuilder.html">RecordBuilder</a></div>
<h1>Barry::RecordBuilder&lt; RecordT, StorageT &gt; Class Template Reference</h1><!-- doxytag: class="Barry::RecordBuilder" --><!-- doxytag: inherits="Barry::Builder" --><code>#include &lt;<a class="el" href="builder_8h-source.html">builder.h</a>&gt;</code>
<p>
<p>Inheritance diagram for Barry::RecordBuilder&lt; RecordT, StorageT &gt;:
<p><center><img src="classBarry_1_1RecordBuilder.png" usemap="#Barry::RecordBuilder< RecordT, StorageT >_map" border="0" alt=""></center>
<map name="Barry::RecordBuilder< RecordT, StorageT >_map">
<area href="classBarry_1_1Builder.html" alt="Barry::Builder" shape="rect" coords="0,0,263,24">
</map>
<a href="classBarry_1_1RecordBuilder-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
<h3>template&lt;class RecordT, class StorageT&gt;<br>
 class Barry::RecordBuilder&lt; RecordT, StorageT &gt;</h3>

Template class for easy creation of specific protocol packet builder objects. 
<p>
This template takes the following template arguments:<p>
<ul>
<li>RecordT: One of the record classes in <a class="el" href="record_8h.html">record.h</a></li><li>StorageT: A custom storage functor class. An object of this type will be called as a function with empty Record as an argument. The storage class is expected to fill the record object in preparation for building the packet out of that data. These calls happen on the fly as the data is sent to the device over USB, so it should not block forever.</li></ul>
<p>
Example SaveDatabase() call:<p>
<pre>
    FIXME
    </pre> 
<p>

<p>
Definition at line <a class="el" href="builder_8h-source.html#l00087">87</a> of file <a class="el" href="builder_8h-source.html">builder.h</a>.<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1RecordBuilder.html#c8cda12de94498b715d6171fb51930af">RecordBuilder</a> (StorageT &amp;storage)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constructor that references an externally managed storage object.  <a href="#c8cda12de94498b715d6171fb51930af"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1RecordBuilder.html#ab6421e54af5c0886d2d9979fe4d2d35">RecordBuilder</a> (StorageT *storage)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constructor that references a locally managed storage object.  <a href="#ab6421e54af5c0886d2d9979fe4d2d35"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="c0e92f4d507720586d5141114c329236"></a><!-- doxytag: member="Barry::RecordBuilder::~RecordBuilder" ref="c0e92f4d507720586d5141114c329236" args="()" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1RecordBuilder.html#c0e92f4d507720586d5141114c329236">~RecordBuilder</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1RecordBuilder.html#8ce2a42e0805c1b64c6bda3aadeb040e">Retrieve</a> (unsigned int databaseId)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called first in the sequence, to allow the application to load the needed data from memory, disk, etc.  <a href="#8ce2a42e0805c1b64c6bda3aadeb040e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1RecordBuilder.html#c2a9d1a00bed05b646da18adf66ee56f">GetRecType</a> () const</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called to retrive the unique ID for this record.  <a href="#c2a9d1a00bed05b646da18adf66ee56f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="e5b8a3bd68ac4fefc9e5e6049715f0f0"></a><!-- doxytag: member="Barry::RecordBuilder::GetUniqueId" ref="e5b8a3bd68ac4fefc9e5e6049715f0f0" args="() const" -->
virtual uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1RecordBuilder.html#e5b8a3bd68ac4fefc9e5e6049715f0f0">GetUniqueId</a> () const</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1RecordBuilder.html#b12fe31225a41f2ebcca45dd4d4ce373">BuildHeader</a> (<a class="el" href="classBarry_1_1Data.html">Data</a> &amp;data, size_t &amp;offset)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Functor member called by Controller::SaveDatabase() during processing.  <a href="#b12fe31225a41f2ebcca45dd4d4ce373"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarry_1_1RecordBuilder.html#02b1ffaa722ef8ece607d89ae8b164ec">BuildFields</a> (<a class="el" href="classBarry_1_1Data.html">Data</a> &amp;data, size_t &amp;offset)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called to build the record field data.  <a href="#02b1ffaa722ef8ece607d89ae8b164ec"></a><br></td></tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="c8cda12de94498b715d6171fb51930af"></a><!-- doxytag: member="Barry::RecordBuilder::RecordBuilder" ref="c8cda12de94498b715d6171fb51930af" args="(StorageT &amp;storage)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class RecordT, class StorageT&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classBarry_1_1RecordBuilder.html">Barry::RecordBuilder</a>&lt; RecordT, StorageT &gt;::<a class="el" href="classBarry_1_1RecordBuilder.html">RecordBuilder</a>           </td>
          <td>(</td>
          <td class="paramtype">StorageT &amp;&nbsp;</td>
          <td class="paramname"> <em>storage</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Constructor that references an externally managed storage object. 
<p>

<p>
Definition at line <a class="el" href="builder_8h-source.html#l00095">95</a> of file <a class="el" href="builder_8h-source.html">builder.h</a>.
</div>
</div><p>
<a class="anchor" name="ab6421e54af5c0886d2d9979fe4d2d35"></a><!-- doxytag: member="Barry::RecordBuilder::RecordBuilder" ref="ab6421e54af5c0886d2d9979fe4d2d35" args="(StorageT *storage)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class RecordT, class StorageT&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classBarry_1_1RecordBuilder.html">Barry::RecordBuilder</a>&lt; RecordT, StorageT &gt;::<a class="el" href="classBarry_1_1RecordBuilder.html">RecordBuilder</a>           </td>
          <td>(</td>
          <td class="paramtype">StorageT *&nbsp;</td>
          <td class="paramname"> <em>storage</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Constructor that references a locally managed storage object. 
<p>
The pointer passed in will be stored, and freed when this class is destroyed. It is safe to call this constructor with a 'new'ly created storage object. 
<p>
Definition at line <a class="el" href="builder_8h-source.html#l00102">102</a> of file <a class="el" href="builder_8h-source.html">builder.h</a>.
</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="8ce2a42e0805c1b64c6bda3aadeb040e"></a><!-- doxytag: member="Barry::RecordBuilder::Retrieve" ref="8ce2a42e0805c1b64c6bda3aadeb040e" args="(unsigned int databaseId)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class RecordT, class StorageT&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">virtual bool <a class="el" href="classBarry_1_1RecordBuilder.html">Barry::RecordBuilder</a>&lt; RecordT, StorageT &gt;::Retrieve           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>databaseId</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called first in the sequence, to allow the application to load the needed data from memory, disk, etc. 
<p>
If successful, return true. If at the end of the series, return false. 
<p>
Implements <a class="el" href="classBarry_1_1Builder.html#936d3e7b4e771fb2f7ee48476d802407">Barry::Builder</a>.
<p>
Definition at line <a class="el" href="builder_8h-source.html#l00111">111</a> of file <a class="el" href="builder_8h-source.html">builder.h</a>.
</div>
</div><p>
<a class="anchor" name="c2a9d1a00bed05b646da18adf66ee56f"></a><!-- doxytag: member="Barry::RecordBuilder::GetRecType" ref="c2a9d1a00bed05b646da18adf66ee56f" args="() const" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class RecordT, class StorageT&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">virtual uint8_t <a class="el" href="classBarry_1_1RecordBuilder.html">Barry::RecordBuilder</a>&lt; RecordT, StorageT &gt;::GetRecType           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const<code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called to retrive the unique ID for this record. 
<p>

<p>
Implements <a class="el" href="classBarry_1_1Builder.html#23d9ae0f2b43520fcb628a92868d766c">Barry::Builder</a>.
<p>
Definition at line <a class="el" href="builder_8h-source.html#l00116">116</a> of file <a class="el" href="builder_8h-source.html">builder.h</a>.
</div>
</div><p>
<a class="anchor" name="b12fe31225a41f2ebcca45dd4d4ce373"></a><!-- doxytag: member="Barry::RecordBuilder::BuildHeader" ref="b12fe31225a41f2ebcca45dd4d4ce373" args="(Data &amp;data, size_t &amp;offset)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class RecordT, class StorageT&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">virtual void <a class="el" href="classBarry_1_1RecordBuilder.html">Barry::RecordBuilder</a>&lt; RecordT, StorageT &gt;::BuildHeader           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBarry_1_1Data.html">Data</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t &amp;&nbsp;</td>
          <td class="paramname"> <em>offset</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Functor member called by Controller::SaveDatabase() during processing. 
<p>

<p>
Implements <a class="el" href="classBarry_1_1Builder.html#7fd24f3f6d34bd1a6e8875ce7c242e9b">Barry::Builder</a>.
<p>
Definition at line <a class="el" href="builder_8h-source.html#l00128">128</a> of file <a class="el" href="builder_8h-source.html">builder.h</a>.
</div>
</div><p>
<a class="anchor" name="02b1ffaa722ef8ece607d89ae8b164ec"></a><!-- doxytag: member="Barry::RecordBuilder::BuildFields" ref="02b1ffaa722ef8ece607d89ae8b164ec" args="(Data &amp;data, size_t &amp;offset)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class RecordT, class StorageT&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">virtual void <a class="el" href="classBarry_1_1RecordBuilder.html">Barry::RecordBuilder</a>&lt; RecordT, StorageT &gt;::BuildFields           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBarry_1_1Data.html">Data</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t &amp;&nbsp;</td>
          <td class="paramname"> <em>offset</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called to build the record field data. 
<p>
<a class="el" href="structStore.html">Store</a> the raw data in data, using offset to know where to write. Be sure to update offset, and be sure to adjust the size of the data packet (possibly with <a class="el" href="classBarry_1_1Data.html#0c4086556f4380616d26161d18bbeb4c">Data::ReleaseBuffer()</a>). 
<p>
Implements <a class="el" href="classBarry_1_1Builder.html#37f36664d4df55f2fa946bb56eb3bba6">Barry::Builder</a>.
<p>
Definition at line <a class="el" href="builder_8h-source.html#l00133">133</a> of file <a class="el" href="builder_8h-source.html">builder.h</a>.
</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="builder_8h-source.html">builder.h</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Wed Sep 24 21:27:32 2008 for Barry by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
