Notes on barry-bcharge.spec:
----------------------------

This SPEC file, barry-bcharge.spec, will create a complete standalone RPM
for just the bcharge utility out of the official barry tarball.

Download the barry-0.7 tarball to /usr/src/redhat/SOURCES and this SPEC file
to /usr/src/redhat/SPECS, then build it like so:

cd /usr/src/redhat/SPECS/
rpmbuild -ba barry-bcharge.spec

(you do *not* have to be root to build - this RPM will build as a non-root
user, just make sure the permissions on /usr/src/redhat/* are OK for your
non-root user)

The resultant RPM will be called something akin to
barry-bcharge-0.7-1.i386.rpm; it will contain the binary, udev rules,
manpage and doc files. It must be installed as root.

If this is the first time installing it or the udev rules, a reboot is
recommended to get the udev rules working correctly. If you have already
installed the udev rules before, a reboot is not needed.



Notes on barry.spec:
--------------------
The attached spec, 'barry.spec', can be used to build a complete set of
installable binaries ("rpm files") for the Barry project.

NOTE: at this time (barry-0.6), patch #1673711 is required by this SPEC.
See step #3 below.

1) ensure you have the appropriate read/write permissions in
/usr/src/redhat/*; adjust as necessary.

2) place barry.spec in /usr/src/redhat/SPECS/

3) download and place barry-0.6.tar.gz and barry-0.6-udev.patch in
/usr/src/redhat/SOURCES/

As a non-root user (permissions from step #1), issue only one of the
following 2 choices:

4a) to build just the libraries and tools:

cd /usr/src/redhat/SPECS/
rpmbuild -ba barry.spec

4b) to build libraries, tools and GUI backup

cd /usr/src/redhat/SPECS/
rpmbuild -ba barry.spec --with gui

NOTE: there is also a third option, '--with opensync', to build the
opensync plugin. The opensync-plugin code is not ready at this time so
don't use it.

The build will create the installable set of files (adjust for version
updates if needed):

/usr/src/redhat/SRPMS/barry-0.6-1.src.rpm
/usr/src/redhat/RPMS/i386/barry-0.6-1.i386.rpm
/usr/src/redhat/RPMS/i386/libbarry-0.6-1.i386.rpm
/usr/src/redhat/RPMS/i386/libbarry-devel-0.6-1.i386.rpm
/usr/src/redhat/RPMS/i386/barry-util-0.6-1.i386.rpm
/usr/src/redhat/RPMS/i386/barry-gui-0.6-1.i386.rpm
/usr/src/redhat/RPMS/i386/barry-debuginfo-0.6-1.i386.rpm

At a minimum you must install barry, libbarry and barry-util in order to
get the commandline tools bcharge, btool and breset.

5) As root, do this:

cd /usr/src/redhat/RPMS/i386/
rpm -ihv barry-0.6-1.i386.rpm libbarry-0.6-1.i386.rpm
barry-util-0.6-1.i386.rpm

(the above 'rpm' command is all on one line). After installation it's
advised you wait a few minutes before plugging in your device; the udev
subsystem needs a chance to recognize the new hotplug scripts that were
just installed. Rebooting is also an option, but should be unnecessary.

NOTE: if you have installed 'barry-bcharge', the standalone package for
bcharge only, you will get a message that it conflicts with barry-util. You
*must* uninstall barry-bcharge first. This is by design, they should never
both be installed at once. Do not use any "rpm --force" type methods to try
and force them both on your system at once.

March 2007

